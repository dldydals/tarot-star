<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BOMARE WEDDING - Digital Atelier</title>
    <!-- Tailwind CSS for Utility First Styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Icons -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <!-- Font: Noto Serif KR (Elegant) & Pretendard (Clean) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@300;500;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Markdown Parser for AI Response -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bomare: {
                        // 밝은 테마에 맞게 색상 정의 변경
                            base: '#f5f5f0', /* Creamy White/Light Background */
                            primary: '#7c634c', /* Warm Taupe (Brand Color) */
                            gold: '#d4af37', /* Champagne Gold */
                            light: '#1a1816', /* Deep Dark Brown/Black Text Color */
                            gray: '#a8a29e'
                        }
                    },
                    fontFamily: {
                        serif: ['"Noto Serif KR"', 'serif'],
                        sans: ['"Noto Sans KR"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom Scrollbar Hide for App-like feel */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        /* Smooth Scroll Snap */
        .snap-x-mandatory {
            scroll-snap-type: x mandatory;
        }
        .snap-center {
            scroll-snap-align: center;
        }

        /* Light Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        
        /* Form Checkbox/Radio Styling */
        .selection-input:checked + label {
            background-color: #7c634c;
            color: white;
            border-color: #7c634c;
        }

        /* Loading Spinner */
        .loader {
            border: 3px solid rgba(0,0,0,0.1);
            border-left-color: #d4af37;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Markdown Styles within AI Result (Adjusted for light background) */
        #ai-content h3 { font-family: 'Noto Serif KR', serif; font-size: 1.1rem; color: #7c634c; margin-bottom: 0.5rem; margin-top: 1rem; }
        #ai-content p { margin-bottom: 0.5rem; font-size: 0.95rem; line-height: 1.6; color: #444; }
        #ai-content ul { list-style-type: disc; padding-left: 1.2rem; margin-bottom: 0.5rem; color: #666; }
        #ai-content li { margin-bottom: 0.25rem; }
        #ai-content strong { color: #1a1816; font-weight: 500; }

        .header-light {
            color: #1a1816;
        }
        .header-dark {
            color: #f5f5f0;
        }
    </style>
</head>
<!-- Body: Light Background, Dark Text -->
<body class="bg-bomare-base text-bomare-light font-sans antialiased pb-24 selection:bg-bomare-primary selection:text-white">

    <!-- 1. Header (Minimal & Transparent -> Light Background on Scroll) -->
    <header class="fixed top-0 left-0 w-full z-40 transition-all duration-300 p-5 flex justify-between items-center bg-transparent">
        <div class="font-serif text-2xl font-bold tracking-widest text-white cursor-pointer flex items-center" onclick="window.scrollTo({top:0, behavior:'smooth'})">
        <img src="/assets/logo2.png" width="40" height="30" class="mr-2">
        BOMARE
        </div>
        <button id="header-menu-btn" class="text-white/90 text-2xl header-dark" onclick="toggleMenu()">
            <i class="fa-solid fa-bars-staggered"></i>
        </button>
    </header>

    <!-- Full Screen Menu Overlay (Dark Theme) -->
    <div id="mobile-menu" class="fixed inset-0 bg-bomare-light text-bomare-base z-50 transform translate-x-full transition-transform duration-300 flex flex-col justify-center items-center space-y-8">
        <button class="absolute top-6 right-6 text-3xl text-bomare-primary" onclick="toggleMenu()">
            <i class="fa-solid fa-xmark"></i>
        </button>
        <a href="#hero" onclick="toggleMenu()" class="text-2xl font-serif text-bomare-base hover:text-bomare-primary">Home</a>
        <a href="#curation" onclick="toggleMenu()" class="text-2xl font-serif text-bomare-base hover:text-bomare-primary">Curation</a>
        <a href="#ai-stylist" onclick="toggleMenu()" class="text-2xl font-serif text-bomare-primary hover:text-bomare-base"><i class="fa-solid fa-wand-magic-sparkles mr-2"></i>AI Stylist</a>
        <a href="#portfolio" onclick="toggleMenu()" class="text-2xl font-serif text-bomare-base hover:text-bomare-primary">Portfolio</a>
        <a href="#event" onclick="toggleMenu()" class="text-2xl font-serif text-bomare-base hover:text-bomare-primary">Event</a>
        <a href="#contact" onclick="toggleMenu()" class="text-2xl font-serif text-bomare-primary">Contact</a>
    </div>

    <!-- 2. Hero Section (Vertical Full Screen) -->
    <section id="hero" class="relative w-full h-screen overflow-hidden flex items-center justify-center text-center">
        <!-- 배경 이미지: Unsplash URL (어두운 오버레이 제거) -->
        <!-- <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1546194781-9b16ac497b79?q=80&w=2000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');"> -->
            <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=2070&auto=format&fit=crop')] bg-cover bg-center"></div>
            <!-- [수정]: 오버레이를 bg-white/10 -> bg-black/20으로 변경하여 명암비를 높임 -->
            <div class="absolute inset-0 bg-black/20"></div> 
        </div>

        <div class="relative z-10 px-6 fade-in text-white shadow-xl">
            <p class="text-bomare-gold text-sm tracking-[0.3em] mb-4 uppercase text-shadow-sm">Timeless Elegance</p>
            <h1 class="font-serif text-4xl md:text-5xl leading-tight mb-6" style="text-shadow: 0 2px 4px rgba(0,0,0,0.5);">
                가장 빛나는 순간의<br>
                <span class="text-bomare-primary italic font-light">Curation</span>
            </h1>
            <p class="text-gray-200 text-sm md:text-base font-light mb-8" style="text-shadow: 0 1px 3px rgba(0,0,0,0.7);">
                당신의 사랑이 예술이 되는 시간,<br>보마르 웨딩 아틀리에
            </p>
            <a href="#curation" class="inline-block border border-white px-8 py-3 rounded-full text-sm hover:bg-white hover:text-bomare-light transition-all bg-white/20 backdrop-blur-sm">
                포트폴리오 감상하기
            </a>
        </div>
        
        <!-- Scroll Indicator -->
        <div class="absolute bottom-24 left-1/2 transform -translate-x-1/2 animate-bounce text-white/80">
            <i class="fa-solid fa-chevron-down"></i>
        </div>
    </section>

    <!-- 3. Curation (Horizontal Swipe Cards) -->
    <section id="curation" class="py-12 pl-5 bg-white">
        <div class="flex items-center justify-between pr-5 mb-6">
            <h2 class="font-serif text-2xl text-bomare-light">Wedding Curation</h2>
            <!-- [수정]: 보조 텍스트 명암비 개선 -->
            <span class="text-xs text-bomare-primary">Swipe <i class="fa-solid fa-arrow-right ml-1"></i></span>
        </div>

        <!-- Carousel Container -->
        <div class="flex overflow-x-auto no-scrollbar snap-x-mandatory space-x-4 pr-5 pb-4">
            
            <!-- Card 1: Venue -->
            <div class="snap-center shrink-0 w-[80vw] md:w-[300px] relative rounded-2xl overflow-hidden aspect-[3/4] group shadow-lg">
                <img src="https://images.unsplash.com/photo-1519167758481-83f550bb49b3?q=80&w=2098&auto=format&fit=crop" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="Venue">
                <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"></div>
                <div class="absolute bottom-0 left-0 p-6 text-white">
                    <p class="text-bomare-gold text-xs font-bold mb-1">VENUE</p>
                    <h3 class="font-serif text-xl">호텔 & 채플 웨딩</h3>
                    <p class="text-xs text-gray-200 mt-2 line-clamp-2">웅장함과 프라이빗함을 동시에 갖춘 엄선된 베뉴 리스트</p>
                </div>
            </div>

            <!-- Card 2: Dress -->
            <div class="snap-center shrink-0 w-[80vw] md:w-[300px] relative rounded-2xl overflow-hidden aspect-[3/4] group shadow-lg">
                <img src="/assets/roserosa.jpg" onerror="this.onerror=null;this.src='https://placehold.co/400x533/3a3a3a/ffffff?text=High-End+Dress+Placeholder'" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="하이엔드 드레스">
                <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"></div>
                <div class="absolute bottom-0 left-0 p-6 text-white">
                    <p class="text-bomare-gold text-xs font-bold mb-1">DRESS</p>
                    <h3 class="font-serif text-xl">하이엔드 드레스</h3>
                    <p class="text-xs text-gray-200 mt-2 line-clamp-2">당신의 실루엣을 가장 아름답게 밝혀줄 수입 드레스 큐레이션</p>
                </div>
            </div>

            <!-- Card 3: Studio -->
            <div class="snap-center shrink-0 w-[80vw] md:w-[300px] relative rounded-2xl overflow-hidden aspect-[3/4] group shadow-lg">
                <img src="https://images.unsplash.com/photo-1537633552985-df8429e8048b?q=80&w=1888&auto=format&fit=crop" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="Studio">
                <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"></div>
                <div class="absolute bottom-0 left-0 p-6 text-white">
                    <p class="text-bomare-gold text-xs font-bold mb-1">STUDIO</p>
                    <h3 class="font-serif text-xl">무드 인물 사진</h3>
                    <p class="text-xs text-gray-200 mt-2 line-clamp-2">시간이 흘러도 촌스럽지 않은 인물 중심의 감각적인 촬영</p>
                </div>
            </div>
            
        </div>
    </section>

    <!-- 4. Portfolio / Event (Vertical Banner) -->
    <section id="event" class="px-5 py-8" id="portfolio">
        <div class="relative w-full rounded-2xl overflow-hidden bg-white border border-gray-100 shadow-md">
            <div class="flex flex-col md:flex-row">
                <div class="w-full md:w-1/2 h-64 md:h-auto relative">
                    <!-- 이벤트 이미지 (Unsplash URL) -->
                    <img src="https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?q=80&w=2070&auto=format&fit=crop" class="absolute inset-0 w-full h-full object-cover" alt="Event">
                </div>
                <!-- 텍스트 색상 조정 -->
                <div class="p-8 flex flex-col justify-center text-bomare-light">
                    <span class="inline-block px-3 py-1 bg-red-600/10 text-red-700 text-xs font-bold rounded-full w-fit mb-3">마감임박</span>
                    <h3 class="font-serif text-2xl mb-2">Early Bird Promotion</h3>
                    <!-- [수정]: 보조 텍스트 명암비 개선 (text-gray-600 -> text-gray-700) -->
                    <p class="text-gray-700 text-sm mb-6">2026년 상반기 예식 예정 고객 대상<br>스드메 패키지 최대 15% 혜택</p>
                    <button onclick="document.getElementById('contact').scrollIntoView({behavior: 'smooth'})" class="w-full py-3 bg-bomare-primary text-white font-bold rounded-lg hover:bg-bomare-gold transition-colors">
                        혜택 확인하기
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- NEW FEATURE: AI Wedding Stylist (Light Background) -->
    <section id="ai-stylist" class="px-5 py-12 bg-gray-50">
        <div class="max-w-md mx-auto">
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-bomare-primary/20 text-bomare-gold mb-4">
                    <i class="fa-solid fa-wand-magic-sparkles text-xl"></i>
                </div>
                <h2 class="font-serif text-2xl mb-2 text-bomare-light">AI Wedding Stylist ✨</h2>
                <!-- [수정]: 보조 텍스트 명암비 개선 (text-gray-600 -> text-gray-700) -->
                <p class="text-gray-700 text-sm">꿈꾸는 결혼식의 키워드를 알려주세요.<br>Gemini가 당신만의 특별한 무드를 제안합니다.</p>
            </div>

            <!-- Input Area (Light Style) -->
            <div class="bg-white border border-gray-200 rounded-2xl p-6 shadow-xl">
                <label class="block text-xs text-bomare-primary mb-3 font-bold uppercase tracking-wider">Your Keywords</label>
                <textarea id="ai-keywords" rows="2" class="w-full bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 focus:outline-none focus:border-bomare-primary text-sm text-bomare-light placeholder-gray-400 mb-4 resize-none" placeholder="예: 4월의 봄, 야외 정원, 로맨틱, 핑크 & 세이지 그린"></textarea>
                
                <button onclick="generateWeddingConcept()" id="ai-btn" class="w-full py-3 bg-bomare-primary text-white font-bold rounded-xl shadow-lg shadow-bomare-primary/20 active:scale-95 transition-all flex justify-center items-center gap-2 group hover:bg-bomare-gold">
                    <span>AI 컨셉 제안받기</span>
                    <i class="fa-solid fa-sparkles text-xs group-hover:rotate-12 transition-transform"></i>
                </button>
            </div>

            <!-- Result Area (Light Style) -->
            <div id="ai-result-container" class="mt-6 hidden fade-in">
                <div class="bg-white rounded-2xl p-6 border border-bomare-primary/30 relative overflow-hidden shadow-xl">
                    <!-- Deco -->
                    <div class="absolute -top-10 -right-10 w-24 h-24 bg-bomare-primary/10 rounded-full blur-2xl"></div>
                    
                    <div class="flex items-center gap-2 mb-4 border-b border-gray-200 pb-3">
                        <span class="text-bomare-primary font-serif text-lg">Bomare Director's Note</span>
                    </div>
                    
                    <!-- Content -->
                    <div id="ai-content" class="text-sm text-bomare-light leading-relaxed min-h-[100px]">
                        <!-- Gemini Response will be injected here -->
                    </div>

                    <!-- Actions -->
                    <div class="mt-4 pt-4 border-t border-gray-200 flex justify-end">
                        <button onclick="copyToClipboard()" class="text-xs text-gray-500 hover:text-bomare-primary flex items-center gap-1">
                            <i class="fa-regular fa-copy"></i> 복사하기
                        </button>
                    </div>
                </div>
            </div>

            <!-- Loading State (Light Style) -->
            <div id="ai-loading" class="mt-8 hidden text-center">
                <div class="inline-block loader mb-3"></div>
                <p class="text-xs text-bomare-primary animate-pulse">Gemini가 완벽한 스타일링을 구상 중입니다...</p>
            </div>
        </div>
    </section>

    <!-- 5. One-Touch Consultation (Simplified Form - Light Style) -->
    <section id="contact" class="px-5 py-12 pb-24 bg-bomare-base">
        <h2 class="font-serif text-2xl mb-2 text-center">Private Consulting</h2>
        <!-- [수정]: 보조 텍스트 명암비 개선 (text-gray-600 -> text-gray-700) -->
        <p class="text-center text-gray-700 text-sm mb-8">간편하게 선택하고, 전문가의 제안을 받아보세요.</p>

        <form onsubmit="event.preventDefault(); alert('상담 신청이 접수되었습니다. 담당자가 곧 연락드리겠습니다.');" class="space-y-6 max-w-md mx-auto">
            
            <!-- 이름/연락처 -->
            <div class="grid grid-cols-2 gap-4">
                <input type="text" placeholder="신랑/신부님 성함" class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:border-bomare-primary placeholder-gray-500 text-sm text-bomare-light transition-colors" required>
                <input type="tel" placeholder="연락처 (-없이)" class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:border-bomare-primary placeholder-gray-500 text-sm text-bomare-light transition-colors" required>
            </div>

            <!-- 예식 예정일 -->
            <div>
                <label class="block text-xs text-bomare-primary mb-2 font-bold uppercase tracking-wider">예식 예정 시기</label>
                <div class="grid grid-cols-3 gap-2">
                    <div>
                        <input type="radio" name="date" id="date1" class="hidden selection-input">
                        <label for="date1" class="block text-center py-3 rounded-lg bg-white border border-gray-300 text-xs text-bomare-light cursor-pointer transition-all hover:bg-gray-100">1년 이내</label>
                    </div>
                    <div>
                        <input type="radio" name="date" id="date2" class="hidden selection-input">
                        <label for="date2" class="block text-center py-3 rounded-lg bg-white border border-gray-300 text-xs text-bomare-light cursor-pointer transition-all hover:bg-gray-100">6개월 이내</label>
                    </div>
                    <div>
                        <input type="radio" name="date" id="date3" class="hidden selection-input">
                        <label for="date3" class="block text-center py-3 rounded-lg bg-white border border-gray-300 text-xs text-bomare-light cursor-pointer transition-all hover:bg-gray-100">미정</label>
                    </div>
                </div>
            </div>

            <!-- 관심 분야 -->
            <div>
                <label class="block text-xs text-bomare-primary mb-2 font-bold uppercase tracking-wider">관심 분야 (중복 가능)</label>
                <div class="flex flex-wrap gap-2">
                    <div>
                        <input type="checkbox" name="interest" id="int1" class="hidden selection-input">
                        <label for="int1" class="inline-block px-4 py-2 rounded-full bg-white border border-gray-300 text-xs text-bomare-light cursor-pointer transition-all hover:bg-gray-100">웨딩홀 섭외</label>
                    </div>
                    <div>
                        <input type="checkbox" name="interest" id="int2" class="hidden selection-input">
                        <label for="int2" class="inline-block px-4 py-2 rounded-full bg-white border border-gray-300 text-xs text-bomare-light cursor-pointer transition-all hover:bg-gray-100">스드메 스타일링</label>
                    </div>
                    <div>
                        <input type="checkbox" name="interest" id="int3" class="hidden selection-input">
                        <label for="int3" class="inline-block px-4 py-2 rounded-full bg-white border border-gray-300 text-xs text-bomare-light cursor-pointer transition-all hover:bg-gray-100">본식 스냅/DVD</label>
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="w-full py-4 bg-bomare-primary text-white font-bold rounded-lg shadow-lg shadow-bomare-primary/30 mt-4 active:scale-95 transition-transform flex justify-center items-center gap-2 hover:bg-bomare-gold">
                <span>무료 상담 신청하기</span>
                <i class="fa-solid fa-paper-plane text-xs"></i>
            </button>

            <!-- KakaoTalk Link -->
            <div class="text-center mt-4">
                <!-- [수정]: 보조 텍스트 명암비 개선 (text-gray-500 -> text-gray-600, decoration-gray-600 -> decoration-gray-700) -->
                <a href="#" class="text-xs text-gray-600 underline decoration-gray-700 hover:text-bomare-primary">카카오톡으로 간편 문의하기</a>
            </div>
        </form>
    </section>

    <!-- 6. Sticky Bottom Navigation (Light Style) -->
    <nav class="glass fixed bottom-0 left-0 w-full z-50 pb-[env(safe-area-inset-bottom)]">
        <div class="flex justify-around items-center h-16">
            <!-- Home -->
            <!-- [수정]: 보조 텍스트 명암비 개선 (text-gray-500 -> text-gray-700) -->
            <a href="#hero" class="flex flex-col items-center justify-center w-1/4 text-gray-700 hover:text-bomare-light transition-colors group">
                <i class="fa-solid fa-house text-lg mb-1 group-hover:scale-110 transition-transform"></i>
                <span class="text-[10px]">홈</span>
            </a>
            
            <!-- Curation -->
            <!-- [수정]: 보조 텍스트 명암비 개선 (text-gray-500 -> text-gray-700) -->
            <a href="#curation" class="flex flex-col items-center justify-center w-1/4 text-gray-700 hover:text-bomare-light transition-colors group">
                <i class="fa-solid fa-gem text-lg mb-1 group-hover:scale-110 transition-transform"></i>
                <span class="text-[10px]">큐레이션</span>
            </a>

            <!-- AI Stylist (New) -->
            <!-- [수정]: 보조 텍스트 명암비 개선 (text-gray-500 -> text-gray-700) -->
            <a href="#ai-stylist" class="flex flex-col items-center justify-center w-1/4 text-gray-700 hover:text-bomare-primary transition-colors group">
                <i class="fa-solid fa-wand-magic-sparkles text-lg mb-1 group-hover:scale-110 transition-transform animate-pulse text-bomare-primary"></i>
                <span class="text-[10px] font-bold text-bomare-primary">AI스타일</span>
            </a>

            <!-- Reserve (Highlighted CTA) -->
            <div class="w-1/4 flex justify-center -mt-6">
                <a href="#contact" class="flex flex-col items-center justify-center bg-bomare-primary text-white w-14 h-14 rounded-full shadow-lg shadow-bomare-primary/40 active:scale-90 transition-transform border-4 border-bomare-base">
                    <i class="fa-regular fa-calendar-check text-xl"></i>
                </a>
            </div>
        </div>
    </nav>

    <script>
        // 1. Gemini API Integration (Logic is theme-independent)
        async function generateWeddingConcept() {
            const apiKey = ""; // System will provide API Key
            const inputField = document.getElementById('ai-keywords');
            const resultContainer = document.getElementById('ai-result-container');
            const loadingIndicator = document.getElementById('ai-loading');
            const contentDiv = document.getElementById('ai-content');
            
            const keywords = inputField.value.trim();

            if (!keywords) {
                alert("원하시는 웨딩 분위기나 키워드를 입력해 주세요.\n(예: 호텔 웨딩, 우아함, 4월)");
                return;
            }

            // UI Reset & Loading State
            resultContainer.classList.add('hidden');
            loadingIndicator.classList.remove('hidden');

            const systemPrompt = "당신은 보마르 웨딩의 수석 웨딩 디렉터입니다. 고객이 제공한 키워드를 바탕으로 가장 적합한 웨딩 컨셉, 컬러 팔레트, 드레스 스타일, 베뉴 분위기를 한국어로 제안해 주세요. 답변은 전문적이고 우아하며 낭만적인 어조를 유지하세요. 답변은 항상 마크다운 형식으로 작성해 주세요.";
            
            const userPrompt = `키워드: ${keywords}`;

            // Exponential backoff retry logic
            const maxRetries = 3;
            let currentRetry = 0;

            while (currentRetry < maxRetries) {
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: userPrompt }]
                            }],
                            systemInstruction: {
                                parts: [{ text: systemPrompt }]
                            }
                        })
                    });

                    if (response.status === 429) {
                        // Too Many Requests, wait and retry
                        const delay = Math.pow(2, currentRetry) * 1000;
                        currentRetry++;
                        await new Promise(resolve => setTimeout(resolve, delay));
                        continue;
                    }

                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

                    const data = await response.json();
                    const textResponse = data.candidates[0].content.parts[0].text;

                    // Render Markdown content
                    contentDiv.innerHTML = marked.parse(textResponse);
                    
                    // Show Result
                    loadingIndicator.classList.add('hidden');
                    resultContainer.classList.remove('hidden');
                    return; // Exit function on success

                } catch (error) {
                    console.error("Gemini API Error:", error);
                    currentRetry++;
                    if (currentRetry >= maxRetries) {
                        alert("죄송합니다. AI 스타일리스트 연결 중 오류가 발생했습니다. 잠시 후 다시 시도해 주세요.");
                        loadingIndicator.classList.add('hidden');
                    } else {
                        const delay = Math.pow(2, currentRetry) * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                    }
                }
            }
        }

        // Copy Feature
        function copyToClipboard() {
            const content = document.getElementById('ai-content').innerText;
            const textarea = document.createElement('textarea');
            textarea.value = content;
            document.body.appendChild(textarea);
            textarea.select();
            // Fallback for secure contexts where navigator.clipboard.writeText might fail
            document.execCommand('copy');
            document.body.removeChild(textarea);
            alert("제안 내용이 클립보드에 복사되었습니다.");
        }

        // 2. Mobile Menu Toggle
        function toggleMenu() {
            const menu = document.getElementById('mobile-menu');
            const isOpen = !menu.classList.contains('translate-x-full');
            
            if (isOpen) {
                menu.classList.add('translate-x-full');
            } else {
                menu.classList.remove('translate-x-full');
            }
        }

        // 3. Header Style on Scroll (Changed for light theme)
        window.addEventListener('scroll', () => {
            const header = document.querySelector('header');
            const logo = document.getElementById('header-logo');
            const menuBtn = document.getElementById('header-menu-btn');

            if (window.scrollY > 50) {
                // Change to light header style
                header.classList.add('bg-white/95', 'backdrop-blur-md', 'shadow-sm');
                header.classList.remove('bg-transparent');
                
                logo.classList.remove('header-dark');
                logo.classList.add('header-light');

                menuBtn.classList.remove('header-dark');
                menuBtn.classList.add('header-light');
            } else {
                // Change to transparent header style (on hero section)
                header.classList.remove('bg-white/95', 'backdrop-blur-md', 'shadow-sm');
                header.classList.add('bg-transparent');

                logo.classList.remove('header-light');
                logo.classList.add('header-dark');

                menuBtn.classList.remove('header-light');
                menuBtn.classList.add('header-dark');
            }
        });

        // 4. Smooth Scroll for Anchor Links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                if(targetId === '#') return;
                
                document.querySelector(targetId).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>